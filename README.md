# Πρωθυπουργός για μια μέρα - A State Budget Analysis and Modification Tool

![Java CI with Maven](https://github.com/MariosGalanis03/DETonomics/actions/workflows/maven.yml/badge.svg)

This project is a application for reviewing, processing and analyzing the state budget. It allows a user to view/change budget data, introduce hypothetical changes, and see the impact of those changes.

# Οδηγίες για την υπόλοιπη ομάδα

## Λειτουργίες σε Εκκρεμότητα

### Επείγοντες

- Σπάσιμο dao ανά model κλάση.
- Αξιοποίηση agentic feedback από κύριο Σπινέλλη.
- Επέκταση unit tests για υψηλότερο ποσοστό κάλυψης από JaCoCo.
- Ανάπτυξη παραθύρου Γραφικής Διεπαφής με τις λειτουργίες που εκτελεί ήδη η εφαρμογή γραμμής εντολών.
- Αλλαγές στα έξοδα. Καταχώριση αλλαγών στο χαμηλότερο επίπεδο (MinistryExpense) με ενημέρωση τιμών υψηλότερων επιπέδων.
- Αλλαγές στα έσοδα. Καταχωρήσεις αλλαγών σε επίπεδα με ενημέρωση άλλων επιπέδων.
- Αλλαγές στα έσοδα και έξοδα με αποθήκευση σε νέα SQLite βάση (Αντιγραφή βάσης ενημερωμένη με τις αλλαγές).

### Μακροχρόνιες

- Διαχρονική Σύγκριση Προϋπολγισμών και σύγκριση μεταξύ δυο διαφορετικών ετών.
- Γραφήματα με καταμερισμό δαπανών και εσόδων στα διάφορα κρατικά σώματα και λειτουργίες.
- Σενάρια και αξιολόγηση ικανότητας κράτους να τα αντιμετωπίσει. Stress testing. Τα σενάρια να πηγάζουν από πραγματικά γεγονότα π.χ. Κρίση 2008. Θα την αντιμετωπίζαμε; Τι συνέπειες θα είχε; Ενδεικτικές λύσεις.
- AI agent για αξιολόγηση και ερμηνεία των αλλαγών.

## Οδηγίες για νέο project structure

### Controller package

Στο πακέτο αυτό συμπεριλαμβάνεται η κύρια κλάση της εφαρμογής (`App.java`). Επίσης συμπεριλαμβάνονται τα entry points της εφαρμογής.

### Entry Point (Main)

Το σημείο εισόδου της εφαρμογής είναι η κλάση `com.detonomics.budgettuner.controller.App`.
Η εκτέλεση της εφαρμογής γίνεται κυρίως μέσω Maven (`mvn exec:java`) όπως περιγράφεται παρακάτω.

### Dao package

Στο πακέτο αυτό συμπεριλαμβάνονται τα Data Access Objects της εφαρμογής. Αποκτούν πρόσβαση στο database της εφαρμογής και επιστρέφουν τα δεδομένα στα service classes.

### Service package

Στο πακέτο αυτό συμπεριλαμβάνονται τα Service classes της εφαρμογής. Οι κλάσεις αυτές είναι οι βασικές λειτουργίες και η υποδομή της εφαρμογής.

### Model package

Αποτελείται από κλάσεις που είναι "εικόνες" των δεδομένων της εφαρμογής.

### Util package

Αποτελείται από κλάσεις που παρέχουν χρήσιμες εργαλεία για την εφαρμογή. Εκτελούν πολύ συγκεκριμένες λειτουργίες


## Χρήση GitHub

Για να διασφαλιστεί η ομαλή συνεργασία και να αποφευχθούν συγκρούσεις κώδικα (merge conflicts), η ομάδα πρέπει να υιοθετήσει ένα σταθερό "GitHub Flow", ξεκινώντας με την απομόνωση της εργασίας. Κάθε μέλος οφείλει να ξεκινά πάντα ενημερώνοντας τον κύριο κλάδο (`main`) με την εντολή `git pull` και αμέσως μετά να δημιουργεί έναν νέο κλάδο εργασίας, ο οποίος πρέπει να είναι περιγραφικός της εκτελούμενης εργασίας (π.χ., `feature/login` ή `bugfix/css-header`). Αυτή η πρακτική διασφαλίζει ότι η ανάπτυξη κάθε νέας λειτουργίας ή διόρθωσης λαμβάνει χώρα σε ένα ασφαλές, απομονωμένο περιβάλλον, χωρίς να επηρεάζει τον σταθερό κώδικα του `main`.

```bash
#1. Ενημέρωση και Δημιουργία Κλάδου
git checkout main            # Μετάβαση στον κύριο κλάδο
git pull                     # Λήψη των τελευταίων αλλαγών
git checkout -b feature/my-new-feature  # Δημιουργία και μετάβαση στον νέο κλάδο
```

Κατά τη διάρκεια της ανάπτυξης, είναι κρίσιμο τα μέλη να εκτελούν μικρά και συχνά commits. Κάθε commit πρέπει να αντιπροσωπεύει μια λογική, αυτόνομη αλλαγή και να συνοδεύεται από ένα σαφές μήνυμα που περιγράφει την πρόθεση της αλλαγής (π.χ., "fix: Διόρθωση σφάλματος επικύρωσης φόρμας"). Πριν από την υποβολή της εργασίας τους για έλεγχο, οι προγραμματιστές πρέπει να συγχρονίζουν τον κλάδο τους με τον `main` χρησιμοποιώντας την εντολή `git pull --rebase origin main`. Το Rebase ενσωματώνει τις τελευταίες αλλαγές του `main` στον κλάδο τους και τους επιτρέπει να επιλύσουν τυχόν συγκρούσεις τοπικά και έγκαιρα, διατηρώντας ταυτόχρονα μια καθαρή και γραμμική ιστορία commits.
```bash
# 2. Commit, Push και Rebase για Συγχρονισμό
git add .
git commit -m "feat: Υλοποίηση UI για φόρμα εισόδου"

# Αρχικό Push στον Remote
git push -u origin feature/my-new-feature

# Rebase για Συγχρονισμό με τον main (Προσοχή στις Συγκρούσεις!)
git pull --rebase origin main 
git push -f  # Χρειάζεται -f μετά το επιτυχημένο rebase
```

Το τελικό στάδιο είναι η ενσωμάτωση μέσω Pull Request (PR). Ο προγραμματιστής ανοίγει ένα PR προς τον `main` μόνο αφού έχει επιλύσει τυχόν συγκρούσεις και έχει ολοκληρώσει τη λειτουργία. Το PR λειτουργεί ως αίτημα για Code Review, όπου ένα άλλο μέλος της ομάδας ελέγχει την ποιότητα, την ασφάλεια και την ορθότητα του κώδικα. Η ενσωμάτωση στον `main` (Merge) πρέπει να πραγματοποιείται μόνο αφότου το PR λάβει τις απαραίτητες εγκρίσεις (Approve) και περάσει όλους τους αυτοματοποιημένους ελέγχους (Tests). Μετά το merge, ο κλάδος εργασίας πρέπει να διαγράφεται, διατηρώντας έτσι τον χώρο εργασίας καθαρό και οργανωμένο.

```bash
# 3. Ολοκλήρωση και Καθαρισμός
# (Μετά την έγκριση του PR και το Merge στο GitHub)
git checkout main
git pull                     # Ενημέρωση του τοπικού main μετά το merge
git branch -d feature/my-new-feature # Διαγραφή του τοπικού κλάδου
```

## Χρήση Maven

Τα προγράμματα java πρέπει να γράφονται μέσα στον φάκελο src/main/java/com/detonomics/budgettuner/backend. Μετά τα προγράμματα χωρίζονται για τώρα σε δύο υποκατηγορίες φακέλων. Τα mainapplicationfeatures όπου γράφεται το σώμα της εφαρμογής που ο χρήστης θα χρησιμοποιήσει ενώ στο budgetingestion γίνονται οι διεργασίες για την εξαγωγή δεδομένων από τα PDF. Στην αρχή κάθε java αρχείου ξεκινάτε με package ακολουθούμενο από το file path στο οποίο βρίσκεται ο νέος φάκελος π.χ. package com.detonomics.budgettuner.backend.
mainapplicationfeatures; Αυτή η γραμμή είναι απαραίτητη.

### Εισαγωγή ξένων πακέτων

Για τη χρήση ξένου κώδικα (δηλαδή άλλων πακέτων εκτός του δικού μας) δεν αρκεί απλά να κάνεται import το πακέτο στο java αρχείο. Πρέπει να βάλετε και μέσα στο pom.xml ανάμεσα στα <dependencies></dependencies> ένα νέο dependency. Ψάξτε το συγκεκριμένο dependency πως ονομάζεται και πως καλείται και εντάξτε το. Μετά από αυτό γράψτε στη γραμμή εντολών:
```bash
mvn clean install
``` 

Αν δεν δουλεύουν τα dependencies που προσθέσατε ΜΗΝ σπρώξετε στο github repo. Αν θέλετε βοήθεια φτιάξτε νέο branch με 
```bash
git checkout -b "Μέσα στα εισαγωγικά το όνομα του προβλήματος"
```
Και έπειτα σπρώξτε το στο github για να το μελετήσει κάποιος. Για άλλες ερωτήσεις στείλτε μήνυμα θα συνεχίσω να γράφω όσο προχωράω στο project.

### Οδηγίες Εκτέλεσης της Εφαρμογής (Command Line / Terminal)

Για να εκτελέσετε την εφαρμογή **BudgetTuner** από τη γραμμή εντολών (Command Prompt, PowerShell ή Terminal) και να εξασφαλίσετε τη σωστή εμφάνιση των Ελληνικών χαρακτήρων (UTF-8), ακολουθήστε τα εξής βήματα:

1.  **Μεταβείτε στον Κεντρικό Φάκελο του Project:**
    Ανοίξτε το CMD/Terminal και μεταβείτε στον φάκελο όπου βρίσκεται το αρχείο `pom.xml` (τον κεντρικό φάκελο `budgettuner`).

2.  **Καθαρισμός & Μεταγλώττιση (Build):**
    Μεταγλωττίστε τον κώδικα για να βεβαιωθείτε ότι όλα τα αρχεία `.class` είναι ενημερωμένα.

    ```bash
    mvn clean install
    ```
    > **Σημείωση:** Αυτό το βήμα είναι απαραίτητο μόνο **την πρώτη φορά** ή μετά από μεγάλες αλλαγές. Για γρήγορη εκτέλεση μετά από μικρές αλλαγές, μπορείτε να το παραλείψετε.

3.  **Επίλυση Προβλήματος Ελληνικών Χαρακτήρων (Μόνο για Windows CMD):**
    Ρυθμίστε την κωδικοσελίδα (Code Page) του CMD σε **UTF-8** για τη σωστή εμφάνιση των Ελληνικών (`chcp 65001`).

    ```bash
    chcp 65001
    ```

4.  **Εκτέλεση της Εφαρμογής:**
    Εκτελέστε την κύρια κλάση (`App.java`) χρησιμοποιώντας το `exec-maven-plugin`.

    ```bash
    mvn exec:java
    ```

Η εφαρμογή θα ξεκινήσει και θα εμφανίσει το διαδραστικό μενού στην κονσόλα.

## Τεκμηρίωση Κώδικα (Javadoc)

Για να δημιουργήσετε την τεκμηρίωση του κώδικα (Javadoc), εκτελέστε:

```bash
mvn javadoc:javadoc
```

Τα αρχεία τεκμηρίωσης θα δημιουργηθούν στον φάκελο `target/site/apidocs/`. Μπορείτε να ανοίξετε το `index.html` με τον browser σας.
