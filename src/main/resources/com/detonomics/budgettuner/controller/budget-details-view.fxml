<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.web.WebView?>

<StackPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.detonomics.budgettuner.controller.BudgetDetailsController">

    <stylesheets>
        <URL value="@styles.css" />
    </stylesheets>

    <BorderPane>
        <top>
            <BorderPane styleClass="details-topbar">
                <left>
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <children>
                            <Button fx:id="menuButton" mnemonicParsing="false" onAction="#onMenuButtonClick" styleClass="menu-button" text="☰" />
                            <Label text="Budget Tuner" styleClass="app-name" />
                        </children>
                    </HBox>
                </left>
                <center>
                    <VBox alignment="CENTER" spacing="5.0">
                        <Label fx:id="titleLabel" text="Προϋπολογισμός" styleClass="details-title">
                            <font>
                                <Font name="Segoe UI Bold" size="28.0" />
                            </font>
                        </Label>
                        <Button mnemonicParsing="false" onAction="#onModifyExpenseClick" styleClass="action-btn-secondary" text="Τροποποίηση Προϋπολογισμού" />
                    </VBox>
                </center>
                <padding>
                    <Insets bottom="14.0" left="14.0" right="18.0" top="14.0" />
                </padding>
            </BorderPane>
        </top>

        <center>
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="details-scroll">
                <content>
                    <VBox fx:id="contentBox" alignment="TOP_CENTER" spacing="22.0">
                        <padding>
                            <Insets bottom="30.0" left="24.0" right="24.0" top="10.0" />
                        </padding>

                        <HBox spacing="18.0" VBox.vgrow="NEVER" styleClass="cards-row">
                            <children>
                                <VBox spacing="8.0" styleClass="dashboard-card" HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Σύνολο Εσόδων" styleClass="card-label-sm" />
                                        <Label fx:id="revenuesValue" text="-" styleClass="card-value-lg" />
                                    </children>
                                    <padding>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                    </padding>
                                </VBox>

                                <VBox spacing="8.0" styleClass="dashboard-card" HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Σύνολο Εξόδων" styleClass="card-label-sm" />
                                        <Label fx:id="expensesValue" text="-" styleClass="card-value-lg" />
                                    </children>
                                    <padding>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                    </padding>
                                </VBox>

                                <VBox spacing="8.0" styleClass="dashboard-card" HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Αποτέλεσμα" wrapText="true" styleClass="card-label-sm" />
                                        <Label fx:id="resultValue" text="-" styleClass="card-value-lg" />
                                    </children>
                                    <padding>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                    </padding>
                                </VBox>
                            </children>
                        </HBox>

                        <VBox spacing="18.0" alignment="TOP_CENTER" maxWidth="Infinity">
                            <children>
                                <HBox spacing="18.0" alignment="TOP_CENTER">
                                    <children>
                                        <VBox spacing="10.0" styleClass="card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                            <children>
                                                <Label text="Μεγαλύτερες Πηγές Εσόδων" styleClass="list-section-title" />
                                                <VBox fx:id="topRevenuesBox" spacing="8.0" />
                                                <HBox alignment="CENTER_RIGHT">
                                                    <Button mnemonicParsing="false" styleClass="action-btn-secondary" text="Ανάλυση Εσόδων" onAction="#onRevenueAnalysisClick" />
                                                </HBox>
                                            </children>
                                            <padding>
                                                <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                            </padding>
                                        </VBox>

                                        <VBox spacing="10.0" styleClass="card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                            <children>
                                                <Label text="Μεγαλύτερες Κατηγορίες Εξόδων" styleClass="list-section-title" />
                                                <VBox fx:id="topExpensesBox" spacing="8.0" />
                                                <HBox alignment="CENTER_RIGHT">
                                                    <Button mnemonicParsing="false" styleClass="action-btn-secondary" text="Ανάλυση Εξόδων" onAction="#onExpenseAnalysisClick" />
                                                </HBox>
                                            </children>
                                            <padding>
                                                <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                            </padding>
                                        </VBox>
                                    </children>
                                </HBox>

                                <VBox alignment="TOP_CENTER" spacing="10.0" styleClass="card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                    <children>
                                        <Label text="Κρατικοί Φορείς με την Μεγαλύτερη Δημοσιονομική Επιβάρυνση" styleClass="list-section-title" wrapText="true" />
                                        <VBox fx:id="topMinistriesBox" spacing="8.0" />
                                        <HBox alignment="CENTER_RIGHT">
                                            <Button mnemonicParsing="false" styleClass="action-btn-secondary" text="Ανάλυση Κρατικών Φορέων" onAction="#onMinistryAnalysisClick" />
                                        </HBox>
                                    </children>
                                    <padding>
                                        <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                    </padding>
                                </VBox>
                            </children>
                        </VBox>

                        <HBox spacing="10.0" alignment="CENTER">
                            <children>
                                <VBox spacing="10.0" styleClass="card chart-card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                    <children>
                                        <Label text="Πορεία Εσόδων" styleClass="section-title" />
                                        <BarChart fx:id="revenueChart" prefHeight="400.0" legendVisible="false">
                                            <xAxis><CategoryAxis label="Έτος" /></xAxis>
                                            <yAxis><NumberAxis label="Ποσό" /></yAxis>
                                        </BarChart>
                                    </children>
                                    <padding>
                                        <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                    </padding>
                                </VBox>

                                <VBox spacing="10.0" styleClass="card chart-card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                    <children>
                                        <Label text="Πορεία Εξόδων" styleClass="section-title" />
                                        <BarChart fx:id="expenseChart" prefHeight="400.0" legendVisible="false">
                                            <xAxis><CategoryAxis label="Έτος" /></xAxis>
                                            <yAxis><NumberAxis label="Ποσό" /></yAxis>
                                        </BarChart>
                                    </children>
                                    <padding>
                                        <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                    </padding>
                                </VBox>

                                <VBox spacing="10.0" styleClass="card chart-card" HBox.hgrow="ALWAYS" maxWidth="720.0">
                                    <children>
                                        <Label text="Πορεία Ισοζυγίου" styleClass="section-title" />
                                        <BarChart fx:id="differenceChart" prefHeight="400.0" legendVisible="false">
                                            <xAxis><CategoryAxis label="Έτος" /></xAxis>
                                            <yAxis><NumberAxis label="Ποσό" /></yAxis>
                                        </BarChart>
                                    </children>
                                    <padding>
                                        <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
                                    </padding>
                                </VBox>
                            </children>
                        </HBox>
                    </VBox>
                </content>
            </ScrollPane>
        </center>
        <bottom>
            <HBox alignment="CENTER_RIGHT" spacing="15.0" BorderPane.alignment="CENTER">
                 <children>
                     <Button mnemonicParsing="false" onAction="#onBackButtonClick" styleClass="btn-white" text="Επιστροφή" />
                     <Button mnemonicParsing="false" onAction="#onExitClick" styleClass="btn-white" text="Έξοδος" style="-fx-background-color: #1565C0; -fx-text-fill: white;" />
                 </children>
                 <padding>
                     <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                 </padding>
            </HBox>
        </bottom>
    </BorderPane>

    <Pane fx:id="menuOverlay" onMouseClicked="#onMenuOverlayClick" styleClass="menu-overlay" visible="false" />

    <VBox fx:id="menuDrawer" styleClass="menu-drawer" maxHeight="Infinity" maxWidth="320.0" prefWidth="320.0" visible="false" StackPane.alignment="CENTER_LEFT">
        <children>
            <Label text="Μενού" styleClass="menu-title" />

            <Button mnemonicParsing="false" onAction="#onMenuSelectBudgetClick" styleClass="menu-item" text="Επιλογή Προϋπολογισμού" />
            <Button mnemonicParsing="false" onAction="#onMenuCompareBudgetsClick" styleClass="menu-item" text="Σύγκριση Προϋπολογισμών" />
            <Button mnemonicParsing="false" onAction="#onMenuImportBudgetClick" styleClass="menu-item" text="Εισαγωγή Νέου Προϋπολογισμού" />
            <Button mnemonicParsing="false" onAction="#onMenuExitClick" styleClass="menu-item" text="Έξοδος" />
        </children>
        <padding>
            <Insets bottom="20.0" left="16.0" right="16.0" top="20.0" />
        </padding>
        <spacing>12.0</spacing>
    </VBox>
</StackPane>

